<!DOCTYPE html>
<html>
<head>
    <title>中考倒计时 - C2201|中考必胜</title>
    <meta charset="utf-8">
    <style>
        /* 更新日志相关样式 */
        .action-buttons {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 10;
        }

        .action-button {
            width: auto;
            padding: 0 20px;
            height: 40px;
            border-radius: 20px;
            background: #8bc34a;
            border: none;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            color: white;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .action-button:hover {
            transform: scale(1.05);
        }

        .changelog-modal .settings-content {
            max-width: 600px;
            height: 75%;
        }

        .text-content {
            padding: 15px;
            white-space: pre-wrap;
            overflow-y: auto;
            height: calc(100% - 50px);
        }

        /* 设置相关样式 */
        .settings-button {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #8bc34a;
            border: none;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            transition: transform 0.3s;
        }

        .settings-button:hover {
            transform: translateX(-50%) scale(1.1);
        }

        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 999;
        }

        .settings-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .settings-content {
        background: white;
        width: 60%;
        height: 75%;
        border-radius: 12px;
        transform: scale(0.8);
        opacity: 0;
        transition: all 0.3s;
        position: relative;
        padding: 20px;
        overflow: hidden; 
    }

        .settings-modal.active .settings-content {
            transform: scale(1);
            opacity: 1;
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .settings-header h3 {
            margin: 0;
            font-size: 24px;
            color: #333;
        }

        .close-btn {
            font-size: 28px;
            cursor: pointer;
            padding: 0 10px;
            color: #666;
        }

        .close-btn:hover {
            color: #333;
        }

        .settings-body {
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding: 20px;
        }

        /* 节气卡片样式 */
        .solar-card {
            position: absolute;
            top: calc(100% + 20px);
            left: 50%;
            transform: translateX(-50%);
            width: 500px;
            background: rgba(255,255,255,0.96);
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, transform 0.3s, visibility 0.3s;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .solar-card::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 10px solid transparent;
            border-bottom-color: rgba(255,255,255,0.96);
        }

        .solar-card.active {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .solar-card h3 {
            text-align: center;
            margin: 0 0 15px;
            font-size: 24px;
            color: #1b5e20;
            font-family: STZhongsong, serif;
        }

        .solar-card img {
            width: 160px;
            height: 140px;
            object-fit: cover;
            border-radius: 8px;
        }

        .solar-card p {
            font-size: 16px;
            line-height: 1.6;
            color: #444;
            margin: 0;
            font-family: 'Microsoft YaHei';
            flex-grow: 1;
            text-align: left;
            text-indent: 2em;
        }

        /.solar-term-marker {
            transition: all 0.3s ease;
        }

        .solar-card {
            transition: opacity 0.3s, transform 0.3s, visibility 0.3s;
        }

		/* 时间样式 */
        .time-section {
		    font-family: 'STZh', sans-serif;
		    font-size: 44px;
		    letter-spacing: 0;
		    color: #1b5e20;
		    margin: 8px 0;
		    display: block;
   		 	width: 100%;
		}

        /* 日期样式 */
        .date-section {
	        font-family: 'Microsoft YaHei', serif;
	        font-size: 22px;
	        color: #666;
	        letter-spacing: 0.5px;
	        white-space: nowrap;  /* 防止换行 */
	        display: block;
    		width: 100%;
    	}

        /* 金句样式 */
        #goldenPhrase {
		    text-align: center;
		    margin: 20px auto;
		    width: 760px;
		    font-size: 24px;
		    color: #1b5e20;
		    min-height: 40px;
		    font-family: STZhongSong, cursive;
		    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
		    transition: opacity 0.5s;
		}
 
        /* 时间容器样式 */
        #currentDateTime {
		    position: absolute;
		    top: 78px;
		    left: 25px;
		    z-index: 5;
		    background: rgba(255,255,255,0.9);
		    padding: 15px 25px;
		    border-radius: 8px;
		    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		    text-align: center;
		    min-width: 180px;
		}
 
        /* 基础样式 */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(to bottom right, #f5fff5, #e8f5e9);
        }
 
        /* 导航栏样式 */
        .navbar {
            background-color: #333;
            overflow: hidden;
            width: 100%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: relative;
            z-index: 6;
        }
 
        .brand {
            float: left;
            color: white;
            padding: 14px 20px;
            font-size: 20px;
            font-weight: bold;
            text-decoration: none;
            letter-spacing: 1px;
        }
 
        .navbar a {
            float: left;
            display: block;
            color: #f2f2f2;
            text-align: center;
            padding: 14px 18px;
            text-decoration: none;
            font-size: 16px;
            transition: all 0.3s;
        }
 
        .small-title {
            text-align: center;
            color: #2d2d2d;
            font-size: 38px;
            font-family: STZhongsong, serif;
            margin-top: 50px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
 
        .big-title {
            text-align: center;
            color: #1b5e20;
            font-size: 160px;
            font-family: STKaiti, cursive;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
 
        .timeline-container {
            max-width: 750px;
            margin: 50px auto;
            position: relative;
            height: 120px;
            overflow: visible;
        }
 
        .timeline-progress {
            height: 8px;
            background: linear-gradient(
                to right,
                #8bc34a 0%,
                #8bc34a var(--progress-percent),
                #e0e0e0 var(--progress-percent),
                #e0e0e0 100%
            );
            border-radius: 4px;
            position: relative;
            margin-top: 60px;
        }
 
        .solar-term-marker {
            position: absolute;
            top: -45px;
            width: 70px;
            text-align: center;
            transform: translateX(-50%);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 2;
        }
 
        .current-marker {
            position: absolute;
            left: 0;
            top: -10px;
            width: 3px;
            height: 30px;
            background: #ff5722;
            transform: translateX(-50%);
            transition: left 0.5s ease-out;
            box-shadow: 0 2px 4px rgba(255,87,34,0.3);
        }
 
        .end-marker {
            position: absolute;
            right: -15px;
            top: -45px;
            width: 90px;
            text-align: center;
            color: #d32f2f;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(211,47,47,0.2);
            transform: translateX(30%);
        }

        /* 作息提示样式 */
        .schedule-container {
            position: absolute;
            top: 220px;
            left: 25px;
            z-index: 5;
            background: rgba(255,255,255,0.9);
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-width: 190px;
        }

        .schedule-item {
            font-family: 'STZhongSong', sans-serif;
            margin: 8px 0;
        }

        .schedule-title {
            display: block;
            font-size: 20px;
            color: #1b5e20;
            font-weight: 600;
            text-align: left;
            line-height: 1;
        }

        .schedule-value {
            display: block;
            font-size: 22px;
            color: #2d2d2d;
            text-align: center;
            margin: 4px 0 0;
            padding: 2px 0;
            line-height: 1;
        }

        .timetable {
            margin-top: 10px;
            border-top: 1px solid #eee;
            padding-top: 8px;
        }

        .timetable-item {
		    font-size: 22px;
		    font-family: STZhongSong, cursive;
		    line-height: 1.4;
            text-align: center;
		}

		.right-image-container {
            position: fixed;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 5;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .right-image-container img {
	        height: 80vh;
	        object-fit: cover;
	        display: block;
	        margin: 0 auto;
	    }

        /* 滑块开关样式 */
        input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        .switch-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin-top: 20px;
        }

        .switch {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .slider {
            position: relative;
            cursor: pointer;
            width: 40px;
            height: 24px;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 24px;
        }

        .switch-text {
            font-size: 14px;
            color: #1b5e20;
            display: inline-block;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #8bc34a;
        }

        input:checked + .slider:before {
            transform: translateX(16px);
        }

        /* 开关选中状态文字颜色 */
        input:checked ~ .switch-text {
            color: #4CAF50;
        }

        /* 新增公告卡片样式 */
        .announcement-card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
            margin: 15px;
            border: 1px solid #eee;
        }

        .announcement-title {
            font-size: 1.6em;  /* 增大字号 */
            color: #1b5e20;
            font-weight: 600;
            margin-bottom: 8px;
            border-bottom: 2px solid #8bc34a;
            padding-bottom: 5px;
            text-align: center;  /* 标题居中 */
        }

        .announcement-time {
            font-size: 0.95em;  /* 增大字号 */
            color: #666;
            margin-bottom: 15px;
            text-align: center;  /* 时间居中 */
        }

        .announcement-body {
            line-height: 1.2;  /* 缩小行高 */
            color: #444;
            font-size: 1.2em;  /* 增大正文字号 */
        }

        .announcement-body ul {
            margin: 8px 0;  /* 缩小间距 */
            padding-left: 25px;
        }

        .announcement-body li {
            margin: 6px 0;  /* 缩小行距 */
        }

        .announcement-footnote {
            font-size: 0.85em;
            color: #999;
            margin-top: 15px;
            border-top: 1px dashed #ddd;
            padding-top: 10px;
        }

        /* 滚动支持 */
        .announcement-content {
            height: calc(100% - 60px);  /* 自动计算高度 */
            overflow-y: auto;  /* 垂直滚动 */
            padding: 0 10px;
        }

        /* 自定义滚动条 */
        .announcement-content::-webkit-scrollbar {
            width: 6px;
        }

        .announcement-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .announcement-content::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        .announcement-content::-webkit-scrollbar-thumb:hover {
            background: #8bc34a;
        }

        .probability-control {
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
            margin: 12px 0;
        }

        .probability-control .switch-text {
            flex: 1;
            font-size: 14px;
            color: #1b5e20;
        }

        .range-group {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 40%; /* 滑动条容器宽度 */
            justify-content: flex-end; /* 右对齐 */
        }

        #apiProbability {
            width: 100%; /* 滑动条占满容器宽度 */
            height: 4px;
            background: #ddd;
            border-radius: 2px;
            -webkit-appearance: none;
            margin: 0 8px;
        }

        #intervalSlider {
            width: 100%; /* 滑动条占满容器宽度 */
            height: 4px;
            background: #ddd;
            border-radius: 2px;
            -webkit-appearance: none;
            margin: 0 8px;
        }

        /* 滑块样式 */
        #apiProbability::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #8bc34a; /* 确保绿色主题色 */
            border-radius: 50%;
            cursor: pointer;
            border: none; /* 移除默认边框 */
            box-shadow: none; /* 移除阴影 */
        }

        #intervalSlider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #8bc34a; /* 确保绿色主题色 */
            border-radius: 50%;
            cursor: pointer;
            border: none; /* 移除默认边框 */
            box-shadow: none; /* 移除阴影 */
        }

        #apiProbability::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #8bc34a; /* Firefox触点颜色 */
            border-radius: 50%;
            border: none; /* 重要：移除Firefox默认边框 */
            cursor: pointer;
        }

        #intervalSlider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #8bc34a; /* Firefox触点颜色 */
            border-radius: 50%;
            border: none; /* 重要：移除Firefox默认边框 */
            cursor: pointer;
        }

        #apiProbabilityValue {
            width: 50px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            font-size: 13px;
        }

        #intervalValue {
            width: 50px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            font-size: 13px;
        }

        .reset-btn {
            padding: 5px 12px;
            min-width: 50px; /* 保证最小宽度 */
            white-space: nowrap; /* 禁止文字换行 */
            background: #8bc34a;
            border-radius: 4px;
            color: white;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }

        .reset-btn:hover {
            background: #7cb342;
            transform: scale(1.05);
            box-shadow: none; /* 移除阴影 */
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <header>
        <nav class="navbar">
            <div class="brand">C2201</div>
            <a href="https://c2201.github.io/">首页</a>
            <a href="https://c2201.github.io/countdown/">新&nbsp;·&nbsp;二十四节气中考倒计时</a>
            <a href="https://c2201.github.io/chicken-soup/">心灵鸡汤</a>
        </nav>
    </header>
 
    <!-- 实时时钟 -->
    <div id="currentDateTime">
        <div class="time-section"></div>
        <div class="date-section"></div>
    </div>

    <!-- 作息提示容器 -->
    <div id="scheduleContainer" class="schedule-container">
        <div class="schedule-item">
            <span class="schedule-title">天气：</span>
            <span class="schedule-value" id="weatherInfo">加载中...</span>
        </div>
        <div class="schedule-item">
            <span class="schedule-title">当前：</span>
            <span class="schedule-value" id="currentSchedule">加载中...</span>
        </div>
        <div class="schedule-item">
            <span class="schedule-title">下节课：</span>
            <span class="schedule-value" id="nextSchedule">加载中...</span>
        </div>
        <div class="timetable" id="todayTimetable"></div>
    </div>
 
    <!-- 主内容 -->
    <div class="small-title">距离2025年中考仅剩</div>
    <div id="daysUntil" class="big-title"></div>
 
    <!-- 时间轴 -->
    <div class="timeline-container">
        <div class="timeline-progress" id="timeline">
            <div class="end-marker">
                <div style="white-space: nowrap;">中考日</div>
                <div style="font-size:0.9em; margin-top:3px">6月18日</div>
            </div>
        </div>
    </div>
 
    <!-- 金句显示 -->
    <div id="goldenPhrase"></div>

    <!-- 每日60s显示 -->
    <div class="right-image-container">
        <img id="apiImage" src="" alt="每日60s">
    </div>

    <!-- 底部按钮显示 -->
    <div class="action-buttons">
        <button id="settingsButton" class="action-button">⚙️ 设置</button>
        <button id="changelogButton" class="action-button">📝 更新日志</button>
        <button id="announcementButton" class="action-button">📢 公告</button>
    </div>

    <!-- 设置模态框 -->
    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <div class="settings-header">
                <h3>设置</h3>
                <span class="close-btn" id="closeSettings">&times;</span>
            </div>
            <div class="settings-body">
                <!-- 移动原来的开关到这里 -->
                <div class="switch-container">
                    <label class="switch">
                        <span class="switch-text">金句自动轮播</span>
                        <input type="checkbox" id="goldenSwitch" checked>
                        <span class="slider"></span>
                    </label>
                    <label class="switch">
                        <span class="switch-text">显示每日60s</span>
                        <input type="checkbox" id="imageSwitch">
                        <span class="slider"></span>
                    </label>
                    <div class="probability-control">
                        <span class="switch-text">联网获取金句的概率(%)</span>
                        <div class="range-group">
                            <input type="range" id="apiProbability" min="0" max="100" value="70">
                            <input type="number" id="apiProbabilityValue" min="0" max="100" value="70">
                            <button class="reset-btn" onclick="resetProbability()">重置</button>
                        </div>
                    </div>
                    <div class="probability-control">
                        <span class="switch-text">金句轮播时间间隔（秒）</span>
                        <div class="range-group">
                            <input type="range" id="intervalSlider" min="1" max="120" value="15">
                            <input type="number" id="intervalValue" min="1" max="120" value="15">
                            <button class="reset-btn" onclick="resetInterval()">重置</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 更新日志模态框 -->
    <div class="settings-modal" id="changelogModal">
        <div class="settings-content">
            <div class="settings-header">
                <h3>更新日志</h3>
                <span class="close-btn" id="closeChangelog">&times;</span>
            </div>
            <div class="text-content" id="changelogContent"></div>
        </div>
    </div>

    <div class="settings-modal" id="announcementModal">
        <div class="settings-content">
            <div class="settings-header" style="padding-bottom: 8px;">
                <h3 style="font-size: 1.2em;">公告</h3>
                <span class="close-btn" id="closeAnnouncement">&times;</span>
            </div>
            <div class="announcement-content">
                <!-- 公告卡片容器 -->
                <div class="announcement-card">
                    <div class="announcement-title">📢 倒计时网站征稿活动开始啦！</div>
                    <div class="announcement-time">2025.3.1</div>
                    <div class="announcement-body">
                        C2201倒计时网站底部金句轮播内容开始征稿了！
                        <ul>
                            <li><strong>参与条件：</strong>是个人都能参加</li>
                            <li><strong>时间：</strong>即日起至毕业</li>
                            <li><strong>征稿内容：</strong>励志文字、优美作文素材或整活（不能八卦）等（特别地，既可以原创，也可以投你在其他地方看到的很好的句子上来，但是要标明出处；若是原创句子可选择展示时是否显示署名）（一个句子展示的概率：励志文字 = 优美作文素材 > 整活，可根据具体情况调整，特别地，若原创句子写的过于好，可以提高展示概率）</li>
                            <li><strong>字数要求：</strong>1~80字（包含标点）</li>
                            <li><strong>提交格式：</strong>你的名字+句子内容+是否原创（+若非原创，标明出处）</li>
                            <li><strong>提交方式：</strong>写在便利贴上交给TQC</li>
                        </ul>
                        <p class="announcement-footnote">最终解释权归TQC所有</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
 
    <script>
        let intervalDuration = 15 * 1000; // 默认15秒
        let phraseTimer = null;

        // 滑动条和输入框事件
        document.getElementById('intervalSlider').addEventListener('input', function(e) {
            const value = Math.min(120, Math.max(1, parseInt(e.target.value) || 15));
            intervalDuration = value * 1000;
            document.getElementById('intervalValue').value = value;
            
            // 如果自动轮播开启则立即应用新间隔
            if (goldenSwitch.checked && phraseTimer) {
                clearInterval(phraseTimer);
                phraseTimer = setInterval(fetchGoldenPhrase, intervalDuration);
            }
        });

        document.getElementById('intervalValue').addEventListener('input', function(e) {
            const value = Math.min(120, Math.max(1, parseInt(e.target.value) || 15));
            intervalDuration = value * 1000;
            document.getElementById('intervalSlider').value = value;
        });

        // 重置间隔函数
        function resetInterval() {
            intervalDuration = 15 * 1000;
            document.getElementById('intervalSlider').value = 15;
            document.getElementById('intervalValue').value = 15;
            
            if (goldenSwitch.checked && phraseTimer) {
                clearInterval(phraseTimer);
                phraseTimer = setInterval(fetchGoldenPhrase, intervalDuration);
            }
        }

        let apiProbability = 50; // 默认概率值

        // 滑动条输入事件监听
        document.getElementById('apiProbability').addEventListener('input', function(e) {
            const value = Math.min(100, Math.max(0, parseInt(e.target.value) || 0));
            apiProbability = value;
            document.getElementById('apiProbabilityValue').value = value;
        });

        // 数值输入框事件监听
        document.getElementById('apiProbabilityValue').addEventListener('input', function(e) {
            const value = Math.min(100, Math.max(0, parseInt(e.target.value) || 0));
            apiProbability = value;
            document.getElementById('apiProbability').value = value;
        });

        // 重置按钮函数
        function resetProbability() {
            apiProbability = 70;
            document.getElementById('apiProbability').value = 70;
            document.getElementById('apiProbabilityValue').value = 70;
        }

        // 公告相关脚本
        const announcementButton = document.getElementById('announcementButton');
        const announcementModal = document.getElementById('announcementModal');
        const closeAnnouncement = document.getElementById('closeAnnouncement');

        // 打开公告
        announcementButton.addEventListener('click', () => {
            announcementModal.classList.add('active');
        });

        // 关闭公告
        closeAnnouncement.addEventListener('click', () => {
            announcementModal.classList.remove('active');
        });

        // 更新日志功能
        const changelogButton = document.getElementById('changelogButton');
        const changelogModal = document.getElementById('changelogModal');
        const closeChangelog = document.getElementById('closeChangelog');

        // 打开更新日志
        changelogButton.addEventListener('click', async () => {
            try {
                const response = await fetch('update.t·xt');
                if (!response.ok) throw new Error('文件加载失败');
                const text = await response.text();
                
                document.getElementById('changelogContent').textContent = 
                    text || "当前没有更新日志内容";
                
                changelogModal.classList.add('active');
            } catch (error) {
                console.error('加载失败:', error);
                document.getElementById('changelogContent').textContent = 
                    "无法加载更新日志，错误码1145141919810(bushi";
                changelogModal.classList.add('active');
            }
        });

        // 关闭弹窗
        closeChangelog.addEventListener('click', () => {
            changelogModal.classList.remove('active');
        });

        // 设置相关脚本
        const settingsButton = document.getElementById('settingsButton');
        const settingsModal = document.getElementById('settingsModal');
        const closeButton = document.getElementById('closeSettings');

        // 打开设置
        settingsButton.addEventListener('click', () => {
            settingsModal.classList.add('active');
        });

        // 关闭设置
        closeButton.addEventListener('click', () => {
            settingsModal.classList.remove('active');
        });

    	// 作息表数据
        const schedule = {
            weekday: [
                ["7:00-7:30", "早餐"],
                ["7:30-7:50", "早读"],
                ["7:50-8:00", "课间"],
                ["8:00-8:40", "第一节课"],
                ["8:40-8:50", "课间"],
                ["8:50-9:30", "第二节课"],
                ["9:30-9:35", "眼保健操"],
                ["9:35-9:55", "课间"],
                ["9:55-10:35", "第三节课"],
                ["10:35-11:00", "跑操"],
                ["11:00-11:40", "第四节课"],
                ["11:40-12:05", "听读训练"],
                ["12:05-12:40", "午餐"],
                ["12:40-13:40", "午休"],
                ["13:40-13:50", "课间"],
                ["13:50-14:00", "课前唱"],
                ["14:00-14:40", "第五节课"],
                ["14:40-14:50", "课间"],
                ["14:50-15:30", "第六节课"],
                ["15:30-15:40", "课间"],
                ["15:40-16:20", "第七节课"],
                ["16:20-16:25", "眼保健操"],
                ["16:25-16:35", "课间"],
                ["16:35-17:15", "第八节课"],
                ["17:15-17:20", "课间"],
                ["17:20-18:00", "第九节课"],
                ["18:00-18:40", "晚餐"],
                ["18:40-20:00", "第一节晚自习"],
                ["20:00-20:10", "课间"],
                ["20:10-21:30", "第二节晚自习"],
                ["21:30-21:40", "课间"],
                ["21:40-22:50", "第三节晚自习"],
                ["22:50-7:00", "睡觉"]
            ]
        };

        // 课程表数据
        const timetable = {
            monday: ["数学","英语","政治","物理","语文","语文","化学","体育","数学"],
            tuesday: ["英语","数学","数学","语文","体育","历史","政治","语文","历史"],
            wednesday: ["数学","物理","英语","历史","音/美","化学","语文","化学","物理"],
            thursday: ["语文","物理","化学","数学","英语","政治","历史","英语","政治"],
            friday: ["数学","语文","英语","体育","物理","化学","班会","文体活动","文体活动"]
        };

        // 时间转换函数
		function timeToMinutes(time) {
		    const [h, m] = time.split(':').map(Number);
		    return h * 60 + m;
		}

        // 获取当前作息函数
		function getCurrentSchedule() {
		    const now = new Date();
		    const day = now.getDay();
		    const currentMinutes = now.getHours() * 60 + now.getMinutes();

		    if(day === 0 || day === 6) return {current: "周末", nextLesson: ""};

		    const todaySchedule = schedule.weekday;
		    let current = "";
		    let nextLesson = "";

		    // 处理跨天时段（22:50-7:00）
		    if(currentMinutes >= timeToMinutes("22:50") || currentMinutes < timeToMinutes("7:00")) {
		        current = "睡觉";
		        // 查找明天第一个"节课"
		        const firstLesson = todaySchedule.find(item => item[1].endsWith("节课"));
		        nextLesson = firstLesson ? firstLesson[1] : "";
		        return {current, nextLesson};
		    }

		    let currentIndex = -1;
		    
		    // 查找当前时间段
		    for(let i = 0; i < todaySchedule.length; i++) {
		        const [start, end] = todaySchedule[i][0].split('-');
		        const startTime = timeToMinutes(start);
		        const endTime = timeToMinutes(end);

		        if(currentMinutes >= startTime && currentMinutes < endTime) {
		            current = todaySchedule[i][1];
		            currentIndex = i;
		            break;
		        }
		    }

		    // 查找下一个"节课"
		    if(currentIndex >= 0) {
		        for(let i = currentIndex + 1; i < todaySchedule.length; i++) {
		            if(todaySchedule[i][1].endsWith("节课")) {
		                nextLesson = todaySchedule[i][1];
		                break;
		            }
		        }
		    }

		    return {current, nextLesson};
		}

        // 获取课程名称
        function getCourseName(day, lessonIndex) {
            const days = ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"];
            const timetableDay = timetable[days[day]];
            return timetableDay ? timetableDay[lessonIndex] : "";
        }

        // 更新作息显示
		function updateScheduleDisplay() {
            const now = new Date();
            const day = now.getDay();  
            const {current, nextLesson} = getCurrentSchedule();

            // 当前作息
            let currentText = current;
            if(current.includes(" 课")) {
                // 找到当前节课在课程表中的位置
                const lessonItems = schedule.weekday.filter(item   => item[1].includes("节"));
                const currentLessonIndex = lessonItems.findIndex(item   => item[1] === current);
                if(currentLessonIndex >=0 && currentLessonIndex <9) {
                    currentText = getCourseName(day, currentLessonIndex);
                }
            }
            document.getElementById('currentSchedule').textContent   = currentText;

            // 下节课
            let nextText = nextLesson;
            if(nextLesson) {
                const lessonItems = schedule.weekday.filter(item   => item[1].includes("节"));
                const nextLessonIndex = lessonItems.findIndex(item   => item[1] === nextLesson);
                if(nextLessonIndex >=0 && nextLessonIndex <9) {
                    nextText = getCourseName(day, nextLessonIndex);
                }
            }
            document.getElementById('nextSchedule').textContent   = nextText || "无";

		    // 今日课表
		    if(day >=1 && day <=5) {
		        const courses = timetable[Object.keys(timetable)[day-1]];
		        document.getElementById('todayTimetable').innerHTML   = courses.map((c,i)   => 
		            `<div class="timetable-item">${i+1}&nbsp;${c}</div>`
		        ).join('');
		    } else {
		        document.getElementById('todayTimetable').innerHTML   = 
		            '<div class="timetable-item">周末无课表</div>';
		    }
		}

        // 节气数据（部分）（2025年）
        const solarTerms = [
        { 
            name: '立春', 
            month: 1, 
            day: 3, 
            color: '#a5d6a7',
            image: 'images/立春.png',
            desc: '立春是二十四节气之首，标志着冬天的结束和春天的开始。此时气温开始回暖，万物复苏，东风送暖，柳树发芽，梅花绽放。古代有迎春仪式和咬春习俗，人们祈求新年吉祥如意。'
        },
        { 
            name: '雨水', 
            month: 1, 
            day: 18, 
            color: '#8bc34a',
            image: 'images/雨水.png',
            desc: '雨水节气正值仲春之初，气温继续回升，降水增多，冰雪融化。这个时节适宜春耕备耕，农民开始忙碌农事。古人有"獭祭鱼"、"鸿雁来"等物候现象观察记载。'
        },
        { 
            name: '惊蛰', 
            month: 2, 
            day: 5, 
            color: '#7cb342',
            image: 'images/惊蛰.png',
            desc: '惊蛰时节春雷始鸣，蛰伏的昆虫被惊醒而出。此时桃花盛开，杏花怒放，田间地头一片繁忙景象。古有"桃始华"、"仓庚鸣"的物候特征。'
        },
        { 
            name: '春分', 
            month: 2, 
            day: 20, 
            color: '#69a63d',
            image: 'images/春分.png',
            desc: '春分日昼夜平分，标志着春季中期。此时莺飞草长，小麦拔节孕穗，农事活动进入繁忙阶段。民间有竖蛋游戏和祭日习俗。'
        },
        { 
            name: '清明', 
            month: 3, 
            day: 4, 
            color: '#5d9536',
            image: 'images/清明.png',
            desc: '清明时节气温升高，春雨绵绵滋润大地。这是扫墓祭祖的重要日子，也是踏青赏花的好时机。古代有蹴鞠、荡秋千等娱乐活动。'
        },
        { 
            name: '谷雨', 
            month: 3, 
            day: 20, 
            color: '#4d802e',
            image: 'images/谷雨.png',
            desc: '谷雨是春季最后一个节气，降雨量增加利于谷物生长。此时牡丹盛开，茶树抽新芽，农忙季节全面到来。有"萍始生"、"鸣鸠拂其羽"等物候现象。'
        },
        { 
            name: '立夏', 
            month: 4, 
            day: 5, 
            color: '#467930',
            image: 'images/立夏.png',
            desc: '立夏标志着夏季的开始，气温显著上升。此时蝼蝈鸣叫，蚯蚓出地面，王瓜开始生长。古代有"迎夏"仪式和尝新活动。'
        },
        { 
            name: '小满', 
            month: 4, 
            day: 21, 
            color: '#3d6826',
            image: 'images/小满.png',
            desc: '小满时节麦类作物籽粒开始饱满但未成熟。此时蚕结茧，菜子成熟可以收割。农谚有"小满小满，麦粒渐满"的说法。'
        },
        { 
            name: '芒种', 
            month: 5, 
            day: 5, 
            color: '#30571f',
            image: 'images/芒种.png',
            desc: '芒种是农忙时节，北方麦收南方插秧。此时梅子成熟，天气潮湿闷热。农谚说"芒种忙忙种"，抓紧时间播种作物。'
        },
        { 
            name: '夏至', 
            month: 5, 
            day: 21, 
            color: '#254517',
            image: '夏至.png',
            desc: '夏至日北半球白昼最长，标志着盛夏到来。此时蝉鸣阵阵，荷花盛开，农作物生长旺盛。古人有祭天仪式和消夏活动。'
        },
        { 
            name: '小暑', 
            month: 6, 
            day: 7, 
            color: '#1c3611',
            image: '小暑.png',
            desc: '小暑时节天气逐渐炎热，雷雨增多。此时蟋蟀开始在墙角鸣叫，鹰隼捕食更加频繁。农谚有"小暑大暑，灌死老鼠"的说法。'
        },
        { 
            name: '大暑', 
            month: 6, 
            day: 22, 
            color: '#122408',
            image: '大暑.png',
            desc: '大暑是一年中最热的时节，高温酷暑考验着万物生长。此时荷花盛开至极，雷阵雨频繁出现。古人有饮伏茶、晒伏姜的习俗。'
        },
        { 
            name: '立秋', 
            month: 7, 
            day: 7, 
            color: '#1a3a4a',
            image: '立秋.png',
            desc: '立秋标志着秋天的开始，气温由热转凉。此时早晚温差加大，稻谷抽穗扬花。古人有"贴秋膘"、"啃秋"等习俗。'
        },
        { 
            name: '处暑', 
            month: 7, 
            day: 23, 
            color: '#2d4d5d',
            image: '处暑.png',
            desc: '处暑时节暑气消退，秋意渐浓。此时农作物进入成熟期，农民开始收割。古代有"祭蜡"和"迎秋"仪式。'
        },
        { 
            name: '白露', 
            month: 8, 
            day: 7, 
            color: '#3d5d6d',
            image: '白露.png',
            desc: '白露时节天气转凉，清晨露水凝结成霜。此时鸿雁南飞，菊花开放。农谚有"白露白茫茫，无谷满粮仓"的说法。'
        },
        { 
            name: '秋分', 
            month: 8, 
            day: 23, 
            color: '#4d6d7d',
            image: '秋分.png',
            desc: '秋分日昼夜平分，标志着秋季中期。此时秋高气爽，桂花飘香。古代有"竖蛋"和"送秋牛"的习俗。'
        },
        { 
            name: '寒露', 
            month: 9, 
            day: 8, 
            color: '#5d7d8d',
            image: '寒露.png',
            desc: '寒露时节气温降低，露水寒冷凝结。此时菊花盛开至极，农事进入抢收阶段。古人有赏菊和饮菊花酒的习俗。'
        },
        { 
            name: '霜降', 
            month: 9, 
            day: 23, 
            color: '#6d8da7',
            image: '霜降.png',
            desc: '霜降是秋季最后一个节气，天气渐冷初霜出现。此时柿子成熟红透，枫叶变红。农谚有"霜降见霜，米谷满仓"的说法。'
        },
        { 
            name: '立冬', 
            month: 10, 
            day: 7, 
            color: '#7d9dc3',
            image: '立冬.png',
            desc: '立冬标志着冬季的开始，气温明显下降。此时水始冰地始冻，农民开始准备越冬作物。古代有"贺冬"和"补冬"的习俗。'
        },
        { 
            name: '小雪', 
            month: 10, 
            day: 22, 
            color: '#8da6d9',
            image: '小雪.png',
            desc: '小雪时节天气寒冷降雪开始。此时阴气下降阳气上升，农事进入冬闲时期。古人有腌制腊肉和观赏雪景的习俗。'
        },
        { 
            name: '大雪', 
            month: 11, 
            day: 7, 
            color: '#9fb4e6',
            image: '大雪.png',
            desc: '大雪时节降雪量增加天气更加寒冷。此时鹖鸟不鸣虎始交，农事基本结束进入农闲。古人有赏雪和制作腊肉的习俗。'
        },
        { 
            name: '冬至', 
            month: 11, 
            day: 21, 
            color: '#b3c2ec',
            image: '冬至.png',
            desc: '冬至日北半球白昼最短标志着寒冬到来。此时蚯蚓结麋角解水泉动，古代有"冬至大如年"的说法和祭祀活动。'
        },
        { 
            name: '小寒', 
            month: 12, 
            day: 6, 
            color: '#c5d1f0',
            image: '小寒.png',
            desc: '小寒时节天气寒冷但未达极点。此时雁北乡鹊始巢雉雊鸲，农事基本停止进入农闲。古人有"数九消寒"的习俗。'
        },
        { 
            name: '大寒', 
            month: 12, 
            day: 20, 
            color: '#d9e0ff',
            image: '大寒.png',
            desc: '大寒是一年中最冷时节标志着冬季尾声。此时鸡乳泽腹水泉动，农事全部结束准备过年。古人有"除旧布新"的习俗迎接新春到来。'
        }
    ];
 
        // 金句功能配置 
        const GOLDEN_APIs = [
		    'https://img.8845.top/yiyan/index.php', 
		    'https://api.mu-jie.cc/stray-birds/range?type=json', 
		    'https://v.api.aa1.cn/api/api-wenan-mingrenmingyan/index.php?aa1=json' 
		];
		let currentApiIndex = 0;
        const localPhrases = {
            high: [ // 60% 概率
                "在晨曦的微光中，露珠轻吻着花瓣，如同繁星点缀于夜空的边际。",
                "夕阳如熔金洒落，将天边染成一幅绚烂的画卷，静候那永不褪色的黄昏。",
                "星光在夜的织锦上细细描绘，每一颗都是未完的故事，悬于无垠的宇宙之中。",
                "风，穿越古老的巷弄，携带着时光的低语，轻抚过岁月的痕迹。",
                "月光倾洒，如细丝般缠绕着树梢，编织着夜的静谧与温柔。",
                "晨曦初破，霞光如织，天边渐渐泛起希望的色彩，迎接新日的诞生。",
                "落叶在秋风中起舞，每一片都是季节的笔触，书写着岁月的诗篇。",
                "雾气缭绕在山间，仿佛是大自然的呼吸，轻柔地覆盖着万物的梦境。",
                "雨滴轻敲窗棂，如同天空在低语，诉说着未了的情缘。",
                "在那遥远的天际，云彩编织着魔法的城堡，等待着勇敢的探险者去探寻。"
            ],
            medium: [ // 30% 概率
                "宝剑锋从磨砺出，梅花香自苦寒来。——《警世贤文·勤奋篇》",
                "千淘万漉虽辛苦，吹尽狂沙始到金。——刘禹锡《浪淘沙·莫道谗言如浪深》",
                "青春须早为，岂能长少年。——孟郊《劝学》"
            ],
            low: [ // 10% 概率
                "冷知识：一加一其实等于二。"
            ]
        };
 
        // 生成节气标记 
        function generateSolarMarkers() {
            const springStart = solarTerms.find(t  => t.name  === '立春');
            const startDate = new Date(2025, springStart.month,  springStart.day); 
            const endDate = new Date(2025, 5, 18);
            const totalDays = (endDate - startDate) / 86400000;
 
            document.querySelectorAll('.solar-term-marker').forEach(m  => m.remove()); 
 
            solarTerms.forEach(term  => {
                const termDate = new Date(2025, term.month,  term.day); 
                if (termDate < startDate || termDate > endDate) return;
 
                const position = ((termDate - startDate) / 86400000 / totalDays) * 100;
                const isPast = termDate < new Date();
 
                const marker = document.createElement('div'); 
                marker.className  = 'solar-term-marker';
                marker.style.left  = `${position}%`;
                marker.innerHTML  = `
                    <div style="color: ${isPast ? '#666' : term.color}; 
                        font-weight: ${isPast ? 'normal' : '600'};
                        text-shadow: ${isPast ? 'none' : '0 2px 4px rgba(0,0,0,0.1)'}">
                        ${term.name} 
                    </div>
                    <div style="font-size:0.9em; color: ${isPast ? '#999' : '#666'};
                        margin-top: 5px">
                        ${termDate.getMonth()+1}  月${termDate.getDate()}  日 
                    </div>
                `;
 
                marker.addEventListener('mouseover',  () => {
                    if (!isPast) {
                        marker.style.transform  = 'translateX(-50%) scale(1.1)';
                        // marker.style.filter  = 'drop-shadow(0 4px 6px rgba(0,0,0,0.15))';
                    }
                });
                marker.addEventListener('mouseout',  () => {
                    marker.style.transform  = 'translateX(-50%) scale(1)';
                    marker.style.filter  = 'none';
                });
 
                timeline.appendChild(marker); 

                // 创建卡片
                const card = document.createElement('div');
                card.className = 'solar-card';
                card.innerHTML = `
                    <h3>${term.name}</h3>
                    <img src="${term.image}" alt="${term.name}">
                    <p>${term.desc}</p>
                `;
                marker.appendChild(card);

                // 点击事件处理
                marker.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const allCards = document.querySelectorAll('.solar-card');
                    allCards.forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                });
            });

            // 点击其他区域隐藏卡片
            document.addEventListener('click', () => {
                document.querySelectorAll('.solar-card').forEach(c => c.classList.remove('active'));
            });
        }
 
        // 时间轴进度 
        function updateTimelineColor() {
            const springStart = solarTerms.find(t  => t.name  === '立春');
            const startDate = new Date(2025, springStart.month,  springStart.day); 
            const endDate = new Date(2025, 5, 18);
            const now = new Date();
 
            const total = endDate - startDate;
            const progress = Math.min(1,  Math.max(0,  (now - startDate) / total));
 
            timeline.style.setProperty('--progress-percent',  `${progress * 100}%`);
            requestAnimationFrame(updateTimelineColor);
        }
 
        // 倒计时更新 
        function updateCountdown() {
            const target = new Date(2025, 5, 18);
            const diff = target - new Date();
            const days = Math.max(0,  Math.ceil(diff  / 86400000));
            document.getElementById('daysUntil').textContent  = `${days}天`;
 
            const now = new Date();
            const msToNextDay = 86400000 - (now % 86400000);
            setTimeout(updateCountdown, msToNextDay);
        }
 
        // 更新时间显示函数 
        function updateClock() {
            const date = new Date();
            const weekDays = ['日','一','二','三','四','五','六'];
            
            // 时间部分 
            const hh = date.getHours().toString().padStart(2,  '0');
            const mm = date.getMinutes().toString().padStart(2,  '0');
            const ss = date.getSeconds().toString().padStart(2,  '0');
            
            // 日期部分 
            const yyyy = date.getFullYear(); 
            const m = (date.getMonth()  + 1).toString().padStart(2, '0');
            const d = date.getDate().toString().padStart(2,  '0');
            const week = weekDays[date.getDay()];
 
            document.getElementById('currentDateTime').innerHTML  = `
                <div class="time-section">${hh}:${mm}:${ss}</div>
                <div class="date-section">${yyyy}/${m}/${d} 周${week}</div>
            `;
            requestAnimationFrame(updateClock);
        }
 
        // 金句功能 
		async function fetchGoldenPhrase() {
		    // 70%概率使用API
		    if (Math.random()  < apiProbability / 100) {
		        try {
		            const apiIndex = Math.floor(Math.random()  * GOLDEN_APIs.length); 
		            const api = GOLDEN_APIs[1];
		            const response = await fetch(api);
		            if (!response.ok)  throw new Error('网络异常');
		            const data = await response.json(); 
		            let text = data.cn + "——泰戈尔"; 
		            if (!text) {
		                throw new Error('数据异常');
		            }
		            updatePhraseDisplay(text);
		        } catch (error) {
		            console.warn('  金句API获取失败:', error);
		            showLocalPhrase();
		        }
		    } else {
		        // 30%概率使用本地金句库
		        showLocalPhrase();
		    }
		}
 
        function updatePhraseDisplay(text) {
		    const container = document.getElementById('goldenPhrase'); 
		    container.style.opacity  = 0;
		    setTimeout(() => {
		        container.textContent  = `「 ${text} 」`;
		        container.style.opacity  = 1;
		    }, 500);
		}
 
        function showLocalPhrase() {
            // 创建加权选择池
            const weightedPool = [
                ...localPhrases.high.map(p => ({ p, w: 6 })),   // 高概率区：权重6
                ...localPhrases.medium.map(p => ({ p, w: 3 })), // 中概率区：权重3 
                ...localPhrases.low.map(p => ({ p, w: 1 }))     // 低概率区：权重1
            ];
		    // 计算总权重
            const totalWeight = weightedPool.reduce((sum, item) => sum + item.w, 0);
            // 生成随机选择数
            let random = Math.random() * totalWeight;
            // 遍历选择池寻找命中项
            for (const item of weightedPool) {
                if (random < item.w) {
                    return updatePhraseDisplay(item.p);
                }
                random -= item.w;
            }
		}

		function fetchAndDisplayImage(url) {
		    fetch('https://api.cenguigui.cn/api/60s/')
		        .then(response => response.blob()) 
		        .then(blob => {
		            const img = document.getElementById('apiImage'); 
		            img.src  = URL.createObjectURL(blob); 
		            img.style.height  = '80vh';
		        })
		        .catch(error => console.error(' 图片加载失败:', error));
		}

        // 初始化开关状态
        const goldenSwitch = document.getElementById('goldenSwitch'); 
        const imageSwitch = document.getElementById('imageSwitch'); 
        const apiImage = document.getElementById('apiImage'); 

        // 金句自动轮播开关
        goldenSwitch.addEventListener('change', function() {
            if (this.checked) {
                phraseTimer = setInterval(fetchGoldenPhrase, intervalDuration);
            } else {
                clearInterval(phraseTimer);
                phraseTimer = null;
            }
        });

        // 显示每日60s开关
        imageSwitch.addEventListener('change',  function() {
            if (this.checked)  {
                apiImage.style.display  = 'block';
                fetchAndDisplayImage();
                setInterval(fetchAndDisplayImage, 86400000);
            } else {
                apiImage.style.display  = 'none';
                clearInterval(imageUpdateInterval);
            }
        });

        // 初始化时设置默认状态
        goldenSwitch.checked  = true; // 默认开启金句自动轮播
        imageSwitch.checked  = true; // 默认开启每日60s显示

        function fetchWeather() {
            fetch('https://v2.api-m.com/api/weather?city=%E5%B2%B3%E9%BA%93%E5%8C%BA')
                .then(response => {
                    if (!response.ok) throw new Error('网络响应异常');
                    return response.json();
                })
                .then(data => {
                if (data.code === 200) {
                    // 获取当前星期（示例返回格式："周五"）
                    const weekDays = ['日', '一', '二', '三', '四', '五', '六'];
                    const currentDay = '周' + weekDays[new Date().getDay()];

                    // 查找匹配的天气数据
                    const todayWeather = data.data.data.find(item => item.date === currentDay);

                    if (todayWeather) {
                        // 格式化温度显示（7-10℃ → 7~10℃）
                        const tempRange = todayWeather.temperature.replace('-', '~');
                        document.getElementById('weatherInfo').textContent = 
                        `${todayWeather.weather} ${tempRange}`;
                    } else {
                        document.getElementById('weatherInfo').textContent = '天气数据异常';
                    }
                } else {
                    throw new Error(data.msg);
                }
                })
            .catch(error => {
                console.error('天气获取失败:', error);
                document.getElementById('weatherInfo').textContent = '天气获取失败';
            });
        }

        window.onload  = function() {
            fetchAndDisplayImage();
        };
 
        // 初始化 
        function init() {
		    updateCountdown();
		    updateClock();
		    updateTimelineColor();
		    generateSolarMarkers();
		    fetchGoldenPhrase();
		    phraseTimer = setInterval(fetchGoldenPhrase, intervalDuration);
		    setInterval(updateScheduleDisplay, 1000);
            fetchWeather();
            setInterval(fetchWeather, 15000);
		}
 
        init();
		window.addEventListener('unload',  () => clearInterval(phraseTimer));
		setInterval(() => {
		    generateSolarMarkers();
		    updateCountdown();
		}, 86400000);
    </script>
</body>
</html>